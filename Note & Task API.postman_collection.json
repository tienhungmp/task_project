{
  "info": {
    "_postman_id": "73271cd9-9092-40cc-a8bd-23a242963355",
    "name": "Note & Task API",
    "description": "Complete API testing for Mobile Note & Task Management",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "22665569",
    "_collection_link": "https://go.postman.co/collection/22665569-73271cd9-9092-40cc-a8bd-23a242963355?source=collection_link"
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', res.accessToken);",
                  "pm.collectionVariables.set('refreshToken', res.refreshToken);",
                  "pm.collectionVariables.set('userId', res.user._id);",
                  "pm.test('Status 201', () => pm.response.to.have.status(201));",
                  "pm.test('Has tokens', () => {",
                  "  pm.expect(res.accessToken).to.exist;",
                  "  pm.expect(res.refreshToken).to.exist;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "email",
                  "value": "test1@example.com",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "password123",
                  "type": "text"
                },
                {
                  "key": "name",
                  "value": "Test User",
                  "type": "text"
                },
                {
                  "key": "avatar",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/photo_2026-01-06_10-03-11.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', res.accessToken);",
                  "pm.collectionVariables.set('refreshToken', res.refreshToken);",
                  "pm.test('Status 200', () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', res.accessToken);",
                  "pm.test('Status 200', () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. User Profile",
      "item": [
        {
          "name": "Get Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has user data', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.email).to.exist;",
                  "  pm.expect(res.name).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/profile",
              "host": ["{{baseUrl}}"],
              "path": ["user", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Profile updated', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.name).to.equal('Updated User');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "hung",
                  "type": "text",
                  "uuid": "3a5d866f-d402-43f6-886a-6eb7401ecf96"
                },
                {
                  "key": "avatar",
                  "type": "file",
                  "uuid": "f03d71e5-3bb8-4bbc-bcbb-678163ed4be1",
                  "src": "/C:/Users/ADMIN/Downloads/photo_2026-01-06_10-03-11.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/user/profile",
              "host": ["{{baseUrl}}"],
              "path": ["user", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Update Avatar",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Avatar updated', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.avatarUrl).to.exist;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/Untitled Diagram.drawio (7).png"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/user/avatar",
              "host": ["{{baseUrl}}"],
              "path": ["user", "avatar"]
            }
          },
          "response": []
        },
        {
          "name": "Change Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Password changed', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.message).to.equal('Password changed successfully');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"password123\",\n  \"newPassword\": \"newpassword456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/password",
              "host": ["{{baseUrl}}"],
              "path": ["user", "password"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Areas",
      "item": [
        {
          "name": "Create Area",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('areaId', res._id);",
                  "pm.test('Status 201', () => pm.response.to.have.status(201));"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Work\",\n  \"color\": 2,\n  \"icon\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/areas",
              "host": ["{{baseUrl}}"],
              "path": ["areas"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Areas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has pagination', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.pagination).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/areas?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["areas"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Area",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Work Updated\",\n  \"color\": \"#EF4444\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/areas/{{areaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["areas", "{{areaId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. Folders",
      "item": [
        {
          "name": "Create Folder",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('folderId', res._id);",
                  "pm.test('Status 201', () => pm.response.to.have.status(201));"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"name\": \"Projects\",\n  \"description\": \"Work projects folder\",\n  \"color\": 1,\n  \"icon\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/folders",
              "host": ["{{baseUrl}}"],
              "path": ["folders"]
            }
          },
          "response": []
        },
        {
          "name": "Create Protected Folder",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"name\": \"Private\",\n  \"description\": \"Confidential documents\",\n  \"color\": 2,\n  \"icon\": 8,\n  \"password\": \"secret123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/folders",
              "host": ["{{baseUrl}}"],
              "path": ["folders"]
            }
          },
          "response": []
        },
        {
          "name": "Update Folder",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Projects\",\n  \"description\": \"Updated description\",\n  \"color\": 3,\n  \"icon\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/folders/{{folderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["folders", "{{folderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Folders by Area",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/folders?areaId={{areaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["folders"],
              "query": [
                {
                  "key": "areaId",
                  "value": "{{areaId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Verify Folder Access",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"password\": \"secret123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/folders/{{folderId}}/access",
              "host": ["{{baseUrl}}"],
              "path": ["folders", "{{folderId}}", "access"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "5. Projects",
      "item": [
        {
          "name": "Create Project",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('projectId', res._id);",
                  "pm.test('Status 201', () => pm.response.to.have.status(201));"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"name\": \"Q1 Planning\",\n  \"description\": \"Planning for Q1 2026\",\n  \"color\": 3,\n  \"icon\": 7,\n  \"startDate\": \"2026-01-01T00:00:00Z\",\n  \"endDate\": \"2026-03-31T23:59:59Z\",\n  \"energyLevel\": \"high\",\n  \"hideCompleted\": false,\n  \"calendarSync\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects",
              "host": ["{{baseUrl}}"],
              "path": ["projects"]
            }
          },
          "response": []
        },
        {
          "name": "Get Project by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has project stats', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res._id).to.exist;",
                  "  pm.expect(res.totalTasks).to.exist;",
                  "  pm.expect(res.completedTasks).to.exist;",
                  "  pm.expect(res.todoTasks).to.exist;",
                  "  pm.expect(res.doingTasks).to.exist;",
                  "  pm.expect(res.completionRate).to.exist;",
                  "  pm.expect(res.isOverdue).to.be.a('boolean');",
                  "  pm.expect(res.duration).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Projects by Areas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has projects with stats', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.projects).to.be.an('array');",
                  "  pm.expect(res.pagination).to.exist;",
                  "  ",
                  "  if (res.projects.length > 0) {",
                  "    const project = res.projects[0];",
                  "    pm.expect(project.totalTasks).to.exist;",
                  "    pm.expect(project.completedTasks).to.exist;",
                  "    pm.expect(project.completionRate).to.exist;",
                  "    pm.expect(project.isOverdue).to.be.a('boolean');",
                  "    pm.expect(project.color).to.exist;",
                  "    pm.expect(project.icon).to.exist;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/projects?areaId={{areaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects"],
              "query": [
                {
                  "key": "areaId",
                  "value": "{{areaId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Project",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 204', () => pm.response.to.have.status(204));"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. Cards",
      "item": [
        {
          "name": "Create Task Card",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "pm.collectionVariables.set('cardId', res._id);",
                  "pm.test('Status 201', () => pm.response.to.have.status(201));"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"title\": \"Complete API documentation\",\n  \"content\": \"Write comprehensive docs for all endpoints\",\n  \"tags\": [\"urgent\", \"documentation\"],\n  \"status\": \"todo\",\n  \"energyLevel\": \"high\",\n  \"dueDate\": \"2026-01-15T10:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards",
              "host": ["{{baseUrl}}"],
              "path": ["cards"]
            }
          },
          "response": []
        },
        {
          "name": "Create Card with Checklist",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"folderId\": \"{{folderId}}\",\n  \"title\": \"Meeting Notes\",\n  \"content\": \"Discussed project timeline and deliverables\",\n  \"tags\": [\"meeting\", \"notes\"],\n  \"link\": \"https://zoom.us/meeting/123\",\n  \"imageUrl\": \"https://example.com/screenshot.png\",\n  \"checklist\": [\n    {\"text\": \"Send follow-up email\", \"checked\": false},\n    {\"text\": \"Update roadmap\", \"checked\": false},\n    {\"text\": \"Schedule next meeting\", \"checked\": true}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards",
              "host": ["{{baseUrl}}"],
              "path": ["cards"]
            }
          },
          "response": []
        },
        {
          "name": "Get Cards with Filters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards?projectId={{projectId}}&status=todo&page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["cards"],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}"
                },
                {
                  "key": "status",
                  "value": "todo"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Cards by Folder",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has cards array', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.cards).to.be.an('array');",
                  "  pm.expect(res.pagination).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/folders/{{folderId}}/cards?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["folders", "{{folderId}}", "cards"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Card Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"doing\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Update Card Checklist",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"checklist\": [\n    {\"text\": \"Review code changes\", \"checked\": true},\n    {\"text\": \"Write unit tests\", \"checked\": false},\n    {\"text\": \"Deploy to staging\", \"checked\": true}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/checklist",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "checklist"]
            }
          },
          "response": []
        },
        {
          "name": "Move Card to Project",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"targetProjectId\": \"{{projectId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/move",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "move"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Card (Soft)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Convert Note to Task",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dueDate\": \"2026-01-20T10:00:00Z\",\n  \"projectId\": \"{{projectId}}\",\n  \"status\": \"todo\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/convert-to-task",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "convert-to-task"]
            }
          },
          "response": []
        },
        {
          "name": "Convert Task to Note",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"folderId\": \"{{folderId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/convert-to-note",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "convert-to-note"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "7. Search",
      "item": [
        {
          "name": "Search Cards",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/search?q=documentation&tags[]=urgent&tags[]=work&dateFrom=2026-01-01",
              "host": ["{{baseUrl}}"],
              "path": ["search"],
              "query": [
                {
                  "key": "q",
                  "value": "documentation"
                },
                {
                  "key": "tags[]",
                  "value": "urgent"
                },
                {
                  "key": "tags[]",
                  "value": "work"
                },
                {
                  "key": "dateFrom",
                  "value": "2026-01-01"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "8. Dashboard",
      "item": [
        {
          "name": "Energy Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/dashboard/energy-overview",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "energy-overview"]
            }
          },
          "response": []
        },
        {
          "name": "Get Stats (Week)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/dashboard/stats?period=week",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "stats"],
              "query": [
                {
                  "key": "period",
                  "value": "week"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Stats (Month)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/dashboard/stats?period=month",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "stats"],
              "query": [
                {
                  "key": "period",
                  "value": "month"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "9. Sync (Mobile)",
      "item": [
        {
          "name": "Incremental Sync",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sync?lastSync=2026-01-01T00:00:00Z",
              "host": ["{{baseUrl}}"],
              "path": ["sync"],
              "query": [
                {
                  "key": "lastSync",
                  "value": "2026-01-01T00:00:00Z"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "10. AI",
      "item": [
        {
          "name": "AI Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200 or 503', () => {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 503]);",
                  "});",
                  "pm.test('Has aiBackend info', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.aiBackend).to.exist;",
                  "  pm.expect(res.aiBackend.status).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/ai/health",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "health"]
            }
          },
          "response": []
        },
        {
          "name": "Analyze Card Content",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200 or 503', () => {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 503]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "  pm.test('Has analysis data', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.analysis).to.exist;",
                  "    pm.expect(res.analysis.suggestedProject).to.exist;",
                  "    pm.expect(res.analysis.suggestedTopic).to.exist;",
                  "    pm.expect(res.analysis.aiTasks).to.be.an('array');",
                  "    pm.expect(res.analysis.projectsSuggested).to.be.an('array');",
                  "    pm.expect(res.analysis.topicsSuggested).to.be.an('array');",
                  "  });",
                  "}",
                  "",
                  "if (pm.response.code === 503) {",
                  "  pm.test('AI service unavailable', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.error).to.include('unavailable');",
                  "  });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"I need to:\\n1. Review the quarterly sales report\\n2. Prepare presentation slides for the board meeting\\n3. Schedule follow-up calls with top 5 clients\\n4. Update the CRM system with latest deals\",\n  \"attachments\": []\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/ai/analyze-card",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "analyze-card"]
            }
          },
          "response": []
        },
        {
          "name": "Classify Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200 or 503', () => {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 503]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "  pm.test('Has classification data', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.classification).to.exist;",
                  "    pm.expect(res.classification.topic).to.exist;",
                  "    pm.expect(res.classification.confidence).to.be.a('number');",
                  "    pm.expect(res.classification.suggestedTags).to.be.an('array');",
                  "    pm.expect(res.classification.aiProjectsSuggested).to.be.an('array');",
                  "    pm.expect(res.classification.aiTopicsSuggested).to.be.an('array');",
                  "    pm.expect(res.classification.reasoning).to.exist;",
                  "  });",
                  "}",
                  "",
                  "if (pm.response.code === 503) {",
                  "  pm.test('AI service unavailable', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.error).to.include('unavailable');",
                  "  });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Product Launch Planning\",\n  \"content\": \"We need to:\\n- Finalize the marketing campaign strategy\\n- Coordinate with the design team for promotional materials\\n- Set up analytics tracking for the launch\\n- Prepare press release and media kit\\n- Schedule social media posts\",\n  \"tags\": [\"marketing\"]\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/ai/classify-note",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "classify-note"]
            }
          },
          "response": []
        },
        {
          "name": "Auto-Organize Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200, 404, or 503', () => {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 404, 503]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "  pm.test('Has organization result', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.result).to.exist;",
                  "    pm.expect(res.result.autoOrganized).to.be.a('boolean');",
                  "    pm.expect(res.result.confidence).to.be.a('number');",
                  "    pm.expect(res.result.aiProjectsSuggested).to.be.an('array');",
                  "    pm.expect(res.result.aiTopicsSuggested).to.be.an('array');",
                  "    ",
                  "    if (res.result.autoOrganized) {",
                  "      pm.expect(res.result.applied).to.exist;",
                  "      pm.test('Applied changes', () => {",
                  "        pm.expect(res.result.applied.area).to.exist;",
                  "        pm.expect(res.result.applied.tags).to.be.an('array');",
                  "      });",
                  "    }",
                  "  });",
                  "}",
                  "",
                  "if (pm.response.code === 404) {",
                  "  pm.test('Card not found', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.error).to.include('not found');",
                  "  });",
                  "}",
                  "",
                  "if (pm.response.code === 503) {",
                  "  pm.test('AI service unavailable', () => {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.error).to.include('unavailable');",
                  "  });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ai/auto-organize/{{cardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "auto-organize", "{{cardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Suggest-project",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"projectDescription\": \"Xây dựng website bán hàng cho shop quần áo. Cần trang chủ, sản phẩm, giỏ hàng, thanh toán.\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ai/suggest-project",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "suggest-project"]
            }
          },
          "response": []
        },
        {
          "name": "CreateProject",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n        \"areaId\": \"69690f37f6060f6aefb2dd06\",\r\n         \"project\": {\r\n            \"name\": \"Website Bán Hàng\",\r\n            \"description\": \"Xây dựng website bán hàng cho shop quần áo với các chức năng như trang chủ, sản phẩm, giỏ hàng và thanh toán.\",\r\n            \"color\": 5,\r\n            \"icon\": 10,\r\n            \"energyLevel\": \"medium\",\r\n            \"estimatedDurationDays\": 30,\r\n            \"priority\": \"High\",\r\n            \"suggestedArea\": \"Công việc\"\r\n        },\r\n        \"tasks\": [\r\n            {\r\n                \"taskText\": \"Nghiên cứu yêu cầu và tính năng cần thiết\",\r\n                \"estimatedTimeMinutes\": 120,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Nghiên cứu\",\r\n                \"order\": 1\r\n            },\r\n            {\r\n                \"taskText\": \"Thiết kế giao diện trang chủ cho website\",\r\n                \"estimatedTimeMinutes\": 180,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Thiết kế\",\r\n                \"order\": 2\r\n            },\r\n            {\r\n                \"taskText\": \"Phát triển chức năng hiển thị sản phẩm\",\r\n                \"estimatedTimeMinutes\": 240,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"high\",\r\n                \"suggestedTopic\": \"Lập trình\",\r\n                \"order\": 3\r\n            },\r\n            {\r\n                \"taskText\": \"Tạo giỏ hàng cho người dùng thêm sản phẩm\",\r\n                \"estimatedTimeMinutes\": 180,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"high\",\r\n                \"suggestedTopic\": \"Lập trình\",\r\n                \"order\": 4\r\n            },\r\n            {\r\n                \"taskText\": \"Xây dựng chức năng thanh toán an toàn\",\r\n                \"estimatedTimeMinutes\": 240,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"high\",\r\n                \"suggestedTopic\": \"Lập trình\",\r\n                \"order\": 5\r\n            },\r\n            {\r\n                \"taskText\": \"Kiểm tra và sửa lỗi cho website\",\r\n                \"estimatedTimeMinutes\": 180,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Kiểm tra\",\r\n                \"order\": 6\r\n            },\r\n            {\r\n                \"taskText\": \"Tối ưu hóa hiệu suất website cho người dùng\",\r\n                \"estimatedTimeMinutes\": 120,\r\n                \"priority\": \"Medium\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Tối ưu hóa\",\r\n                \"order\": 7\r\n            },\r\n            {\r\n                \"taskText\": \"Triển khai website lên máy chủ thực tế\",\r\n                \"estimatedTimeMinutes\": 90,\r\n                \"priority\": \"High\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Triển khai\",\r\n                \"order\": 8\r\n            },\r\n            {\r\n                \"taskText\": \"Tạo tài liệu hướng dẫn sử dụng cho người dùng\",\r\n                \"estimatedTimeMinutes\": 120,\r\n                \"priority\": \"Medium\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Tài liệu\",\r\n                \"order\": 9\r\n            },\r\n            {\r\n                \"taskText\": \"Thực hiện quảng bá website đến khách hàng\",\r\n                \"estimatedTimeMinutes\": 150,\r\n                \"priority\": \"Medium\",\r\n                \"status\": \"todo\",\r\n                \"energyLevel\": \"medium\",\r\n                \"suggestedTopic\": \"Marketing\",\r\n                \"order\": 10\r\n            }\r\n        ]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ai/create-project",
              "host": ["{{baseUrl}}"],
              "path": ["ai", "create-project"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "11. Blocks",
      "item": [
        {
          "name": "Add Text Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block added', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.blocks).to.be.an('array');",
                  "  pm.expect(res.blocks.length).to.be.greaterThan(0);",
                  "  const lastBlock = res.blocks[res.blocks.length - 1];",
                  "  pm.collectionVariables.set('blockId', lastBlock._id);",
                  "  pm.expect(lastBlock.type).to.equal('text');",
                  "  pm.expect(lastBlock.metadata.createdAt).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"text\",\n  \"content\": {\n    \"text\": \"This is a sample text block\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Image Block",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"image\",\n  \"content\": {\n    \"imageUrl\": \"https://example.com/image.jpg\",\n    \"imageCaption\": \"Sample diagram\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Checkbox Block",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"checkbox\",\n  \"content\": {\n    \"checked\": false,\n    \"label\": \"Complete this task\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Audio Block",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"audio\",\n  \"content\": {\n    \"audioUrl\": \"https://example.com/recording.mp3\",\n    \"audioDuration\": 120\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Pinned Block",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"text\",\n  \"content\": {\n    \"text\": \"Important pinned note!\"\n  },\n  \"isPinned\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Update Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block updated', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.blocks).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": {\n    \"text\": \"Updated text block content\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{blockId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "{{blockId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Pin Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block pinned', () => {",
                  "  const res = pm.response.json();",
                  "  const block = res.blocks.find(b => b._id === pm.collectionVariables.get('blockId'));",
                  "  pm.expect(block.isPinned).to.be.true;",
                  "  pm.expect(block.pinnedAt).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{blockId}}/pin",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "{{blockId}}", "pin"]
            }
          },
          "response": []
        },
        {
          "name": "Unpin Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block unpinned', () => {",
                  "  const res = pm.response.json();",
                  "  const block = res.blocks.find(b => b._id === pm.collectionVariables.get('blockId'));",
                  "  pm.expect(block.isPinned).to.be.false;",
                  "  pm.expect(block.pinnedAt).to.be.null;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{blockId}}/pin",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "{{blockId}}", "pin"]
            }
          },
          "response": []
        },
        {
          "name": "Toggle Pin Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Pin toggled', () => {",
                  "  const res = pm.response.json();",
                  "  const block = res.blocks.find(b => b._id === pm.collectionVariables.get('blockId'));",
                  "  pm.expect(block.isPinned).to.be.a('boolean');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{blockId}}/toggle-pin",
              "host": ["{{baseUrl}}"],
              "path": [
                "cards",
                "{{cardId}}",
                "blocks",
                "{{blockId}}",
                "toggle-pin"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Sort Preference (CreatedAt Desc)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Sort preference updated', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.blocksSortBy).to.equal('createdAt');",
                  "  pm.expect(res.blocksSortOrder).to.equal('desc');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sortBy\": \"createdAt\",\n  \"sortOrder\": \"desc\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/sort-preference",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "sort-preference"]
            }
          },
          "response": []
        },
        {
          "name": "Update Sort Preference (Order Asc)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sortBy\": \"order\",\n  \"sortOrder\": \"asc\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/sort-preference",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "sort-preference"]
            }
          },
          "response": []
        },
        {
          "name": "Get Sorted Blocks (Custom)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has sorted blocks', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.blocks).to.be.an('array');",
                  "  ",
                  "  // Check pinned blocks are first",
                  "  const pinnedBlocks = res.blocks.filter(b => b.isPinned);",
                  "  const unpinnedBlocks = res.blocks.filter(b => !b.isPinned);",
                  "  ",
                  "  if (pinnedBlocks.length > 0) {",
                  "    const firstPinnedIndex = res.blocks.findIndex(b => b.isPinned);",
                  "    const firstUnpinnedIndex = res.blocks.findIndex(b => !b.isPinned);",
                  "    ",
                  "    if (firstUnpinnedIndex !== -1) {",
                  "      pm.expect(firstPinnedIndex).to.be.lessThan(firstUnpinnedIndex);",
                  "    }",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/sorted?sortBy=createdAt&sortOrder=desc",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "sorted"],
              "query": [
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Card with Sorted Blocks",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Has sortedBlocks virtual', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.sortedBlocks).to.be.an('array');",
                  "  pm.expect(res.blocks).to.be.an('array');",
                  "  pm.expect(res.blocksSortBy).to.exist;",
                  "  pm.expect(res.blocksSortOrder).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Reorder Blocks",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Blocks reordered', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.blocks).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"blockOrders\": [\n    {\"blockId\": \"{{blockId}}\", \"order\": 0}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/reorder",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "reorder"]
            }
          },
          "response": []
        },
        {
          "name": "Update All Blocks",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"blocks\": [\n    {\n      \"type\": \"text\",\n      \"order\": 0,\n      \"isPinned\": false,\n      \"content\": {\"text\": \"First block\"}\n    },\n    {\n      \"type\": \"checkbox\",\n      \"order\": 1,\n      \"isPinned\": true,\n      \"content\": {\"checked\": false, \"label\": \"Important task\"}\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Block",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block deleted', () => {",
                  "  const res = pm.response.json();",
                  "  const block = res.blocks.find(b => b._id === pm.collectionVariables.get('blockId'));",
                  "  pm.expect(block).to.be.undefined;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{blockId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "{{blockId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Upload Block File",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('File uploaded', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.url).to.exist;",
                  "  pm.expect(res.fileName).to.exist;",
                  "  pm.expect(res.fileSize).to.exist;",
                  "  pm.expect(res.mimeType).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/your/test-image.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/blocks/upload",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "blocks", "upload"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "12. Blocks - Optimized Upload",
      "item": [
        {
          "name": "Add Image Block with File (1 API)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Image block created with file', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.true;",
                  "  pm.expect(res.card).to.exist;",
                  "  pm.expect(res.block).to.exist;",
                  "  pm.expect(res.block.type).to.equal('image');",
                  "  pm.expect(res.block.content.imageUrl).to.exist;",
                  "  pm.expect(res.block.metadata.fileName).to.exist;",
                  "  pm.expect(res.fileInfo).to.exist;",
                  "  pm.collectionVariables.set('imageBlockId', res.block._id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/test-image.jpg"
                },
                {
                  "key": "type",
                  "value": "image",
                  "type": "text"
                },
                {
                  "key": "caption",
                  "value": "My beautiful sunset photo",
                  "type": "text"
                },
                {
                  "key": "isPinned",
                  "value": "false",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/with-file",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "with-file"]
            }
          },
          "response": []
        },
        {
          "name": "Add Audio Block with File (1 API)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Audio block created with file', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.true;",
                  "  pm.expect(res.card).to.exist;",
                  "  pm.expect(res.block).to.exist;",
                  "  pm.expect(res.block.type).to.equal('audio');",
                  "  pm.expect(res.block.content.audioUrl).to.exist;",
                  "  pm.expect(res.block.metadata.fileName).to.exist;",
                  "  pm.expect(res.fileInfo).to.exist;",
                  "  pm.collectionVariables.set('audioBlockId', res.block._id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/voice-note.mp3"
                },
                {
                  "key": "type",
                  "value": "audio",
                  "type": "text"
                },
                {
                  "key": "order",
                  "value": "5",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/with-file",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "with-file"]
            }
          },
          "response": []
        },
        {
          "name": "Add Pinned Image Block with File",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Pinned image block created', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.true;",
                  "  pm.expect(res.block.isPinned).to.be.true;",
                  "  pm.expect(res.block.pinnedAt).to.exist;",
                  "  pm.expect(res.block.type).to.equal('image');",
                  "  pm.expect(res.block.content.imageUrl).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/important-diagram.png"
                },
                {
                  "key": "type",
                  "value": "image",
                  "type": "text"
                },
                {
                  "key": "caption",
                  "value": "Important reference diagram - always visible",
                  "type": "text"
                },
                {
                  "key": "isPinned",
                  "value": "true",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/with-file",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "with-file"]
            }
          },
          "response": []
        },
        {
          "name": "Update Image Block File",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Block file updated', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.true;",
                  "  pm.expect(res.card).to.exist;",
                  "  pm.expect(res.fileInfo).to.exist;",
                  "  pm.expect(res.fileInfo.url).to.exist;",
                  "  pm.expect(res.fileInfo.fileName).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/new-image.jpg"
                },
                {
                  "key": "caption",
                  "value": "Updated caption for the new image",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{imageBlockId}}/file",
              "host": ["{{baseUrl}}"],
              "path": [
                "cards",
                "{{cardId}}",
                "blocks",
                "{{imageBlockId}}",
                "file"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Audio Block File",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Audio file replaced', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.true;",
                  "  pm.expect(res.fileInfo.url).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/new-recording.mp3"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/{{audioBlockId}}/file",
              "host": ["{{baseUrl}}"],
              "path": [
                "cards",
                "{{cardId}}",
                "blocks",
                "{{audioBlockId}}",
                "file"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Error: Invalid Block Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 400', () => pm.response.to.have.status(400));",
                  "pm.test('Has error message', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.error).to.include('Invalid block type');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/C:/Users/ADMIN/Downloads/test.jpg"
                },
                {
                  "key": "type",
                  "value": "text",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/with-file",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "with-file"]
            }
          },
          "response": []
        },
        {
          "name": "Error: No File Provided",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 400', () => pm.response.to.have.status(400));",
                  "pm.test('Has error message', () => {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.error).to.include('File is required');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "type",
                  "value": "image",
                  "type": "text"
                },
                {
                  "key": "caption",
                  "value": "No file attached",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cards/{{cardId}}/blocks/with-file",
              "host": ["{{baseUrl}}"],
              "path": ["cards", "{{cardId}}", "blocks", "with-file"]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api"
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "refreshToken",
      "value": ""
    },
    {
      "key": "userId",
      "value": ""
    },
    {
      "key": "areaId",
      "value": ""
    },
    {
      "key": "folderId",
      "value": ""
    },
    {
      "key": "projectId",
      "value": ""
    },
    {
      "key": "cardId",
      "value": ""
    }
  ]
}
